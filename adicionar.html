<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Adicionar - Meu Restaurante</title>
  <link rel="stylesheet" href="style.css" />
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyArGMJgRxw3qUkQcv6vVur_o921vCbJIFI",
      authDomain: "meu-pedido-online-c2ff1.firebaseapp.com",
      projectId: "meu-pedido-online-c2ff1",
      storageBucket: "meu-pedido-online-c2ff1.appspot.com",
      messagingSenderId: "949953908074",
      appId: "1:949953908074:web:8f34ddb9af67a07db1a913",
      measurementId: "G-B99PGCNDTT"
    };
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    window.addEventListener('DOMContentLoaded', ()=>{
      const form = document.getElementById('f');
      form.addEventListener('submit', (e)=>{
        e.preventDefault();
        const nome = document.getElementById('n').value.trim();
        const desc = document.getElementById('d').value.trim();
        const preco = Number(document.getElementById('p').value);
        const file = document.getElementById('img').files[0];
        if (!file) return alert('Escolha imagem');
        const r = new FileReader();
        r.onload = async () => {
          await addDoc(collection(db,'produtos'), { nome, descricao:desc, preco, imagem:r.result, pausado:false });
          alert('Produto adicionado');
          form.reset();
        };
        r.readAsDataURL(file);
      });
    });
  </script>
</head>
<body>
  <header class="topbar"><h1>Adicionar produto</h1></header>
  <main class="container">
    <form id="f" class="form">
      <label>Nome</label><input id="n" required />
      <label>Descrição</label><textarea id="d"></textarea>
      <label>Preço</label><input id="p" type="number" step="0.01" required />
      <label>Imagem</label><input id="img" type="file" accept="image/*" required />
      <button type="submit" class="btn primary">Salvar</button>
    </form>
  </main>
</body>
</html>
